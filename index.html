<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modélisation BPMN - Processus de vente CPA Techno</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        svg {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            background-color: white;
        }
        .pool {
            fill: #f9f9f9;
            stroke: #000;
            stroke-width: 2px;
        }
        .lane {
            stroke: #000;
            stroke-width: 1px;
            stroke-dasharray: 5,5;
        }
        .task {
            fill: #fff;
            stroke: #000;
            stroke-width: 1px;
            rx: 10px;
            ry: 10px;
        }
        .event {
            stroke: #000;
            stroke-width: 1px;
        }
        .start-event {
            fill: #fff;
        }
        .end-event {
            fill: #fff;
            stroke-width: 3px;
        }
        .gateway {
            fill: #fff;
            stroke: #000;
            stroke-width: 1px;
        }
        .sequence-flow {
            stroke: #000;
            stroke-width: 1px;
            fill: none;
            marker-end: url(#arrowhead);
        }
        .message-flow {
            stroke: #000;
            stroke-width: 1px;
            stroke-dasharray: 5,5;
            fill: none;
            marker-end: url(#arrowhead);
        }
        .data-object {
            fill: #fff;
            stroke: #000;
            stroke-width: 1px;
        }
        .data-store {
            fill: #fff;
            stroke: #000;
            stroke-width: 1px;
        }
        text {
            font-size: 12px;
            font-family: Arial, sans-serif;
        }
        .lane-text {
            font-weight: bold;
            font-size: 14px;
        }
        .message-event-white {
            fill: #fff;
        }
        .message-event-black {
            fill: #000;
        }
        .timer-event {
            fill: #fff;
        }
    </style>
</head>
<body>
    <h1>Modélisation BPMN - Processus de vente CPA Techno</h1>
    <svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
        <!-- Markers pour les flèches -->
        <defs>
            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" />
            </marker>
        </defs>

        <!-- Piscine principale -->
        <rect x="50" y="50" width="1100" height="800" class="pool" />
        <text x="60" y="70" class="lane-text">Processus de vente</text>

        <!-- Couloir Client -->
        <rect x="150" y="50" width="1000" height="100" fill="white" stroke="black" />
        <line x1="150" y1="50" x2="150" y2="850" stroke="black" stroke-width="2" />
        <text x="60" y="100" transform="rotate(-90, 60, 100)" class="lane-text">Client</text>

        <!-- Couloir Agent aux soumissions -->
        <rect x="150" y="150" width="1000" height="300" fill="white" stroke="black" />
        <line x1="150" y1="150" x2="150" y2="850" stroke="black" stroke-width="1" />
        <text x="60" y="300" transform="rotate(-90, 60, 300)" class="lane-text">Agent aux soumissions</text>

        <!-- Couloir Superviseur département génie-technique -->
        <rect x="150" y="450" width="1000" height="200" fill="white" stroke="black" />
        <text x="60" y="550" transform="rotate(-90, 60, 550)" class="lane-text">Superviseur génie-technique</text>

        <!-- Couloir Agent technique -->
        <rect x="150" y="650" width="1000" height="150" fill="white" stroke="black" />
        <text x="60" y="725" transform="rotate(-90, 60, 725)" class="lane-text">Agent technique</text>

        <!-- Couloir Usine -->
        <rect x="150" y="800" width="1000" height="50" fill="white" stroke="black" />
        <text x="60" y="825" transform="rotate(-90, 60, 825)" class="lane-text">Usine</text>

        <!-- CLIENT - Demande de soumission -->
        <polygon points="200,80 210,70 220,80 210,90" class="message-event-white" stroke="black" fill="white" />
        <text x="210" y="110" text-anchor="middle">Demande de soumission</text>

        <!-- AGENT AUX SOUMISSIONS -->
        <!-- Événement de début (Réception demande) -->
        <circle cx="210" cy="200" r="15" class="event start-event" stroke-width="1.5" />
        <circle cx="210" cy="200" r="12" class="message-event-white" stroke="black" stroke-width="1" />
        <text x="210" y="175" text-anchor="middle" alignment-baseline="middle">Réception demande</text>

        <!-- Tâche 1: Vérifier si client existe -->
        <rect x="260" y="175" width="100" height="50" class="task" />
        <text x="310" y="200" text-anchor="middle" alignment-baseline="middle" font-size="11">Vérifier si le client existe</text>

        <!-- Passerelle (Client existe?) -->
        <rect x="390" y="175" width="50" height="50" class="gateway" transform="rotate(45, 415, 200)" />
        <text x="415" y="240" text-anchor="middle" alignment-baseline="middle">Client existe?</text>

        <!-- Tâche 2a: Créer et envoyer courriel (Non) -->
        <rect x="370" y="300" width="100" height="50" class="task" />
        <text x="420" y="320" text-anchor="middle" alignment-baseline="middle" font-size="10">Créer/envoyer courriel d'inscription</text>

        <!-- Fin pour client non existant -->
        <circle cx="520" cy="325" r="15" class="event end-event" stroke-width="3" />
        <circle cx="520" cy="325" r="12" stroke="black" stroke-width="1" />
        <path d="M514,319 L526,319 M514,325 L526,325 M514,331 L526,331" stroke="black" stroke-width="1" />
        <text x="520" y="355" text-anchor="middle">Invitation à s'inscrire</text>

        <!-- Tâche 3: Vérifier conformité -->
        <rect x="480" y="175" width="100" height="50" class="task" />
        <text x="530" y="200" text-anchor="middle" alignment-baseline="middle" font-size="11">Vérifier la conformité des dessins</text>

        <!-- Passerelle (Dessins conformes?) -->
        <rect x="610" y="175" width="50" height="50" class="gateway" transform="rotate(45, 635, 200)" />
        <text x="635" y="240" text-anchor="middle" alignment-baseline="middle">Dessins conformes?</text>

        <!-- Tâche 4a: Créer et envoyer courriel (Non) -->
        <rect x="590" y="300" width="100" height="50" class="task" />
        <text x="640" y="320" text-anchor="middle" alignment-baseline="middle" font-size="10">Créer/envoyer demande de correction</text>

        <!-- Fin pour dessins non conformes -->
        <circle cx="740" cy="325" r="15" class="event end-event" stroke-width="3" />
        <circle cx="740" cy="325" r="12" stroke="black" stroke-width="1" />
        <path d="M734,319 L746,319 M734,325 L746,325 M734,331 L746,331" stroke="black" stroke-width="1" />
        <text x="740" y="355" text-anchor="middle">Avis dessins non conformes</text>

        <!-- Tâche 5: Étudier la demande -->
        <rect x="700" y="175" width="100" height="50" class="task" />
        <text x="750" y="200" text-anchor="middle" alignment-baseline="middle" font-size="11">Étudier la demande de soumission</text>

        <!-- Tâche 6: Créer l'offre -->
        <rect x="830" y="175" width="100" height="50" class="task" />
        <text x="880" y="200" text-anchor="middle" alignment-baseline="middle" font-size="11">Créer une offre</text>

        <!-- Réception réponse client -->
        <circle cx="880" cy="280" r="15" class="event" stroke-width="1.5" />
        <circle cx="880" cy="280" r="12" class="message-event-white" stroke="black" stroke-width="1" />
        <text x="880" y="310" text-anchor="middle" alignment-baseline="middle">Réception réponse (~3h)</text>

        <!-- Tâche 7: Prendre connaissance réponse -->
        <rect x="960" y="255" width="100" height="50" class="task" />
        <text x="1010" y="280" text-anchor="middle" alignment-baseline="middle" font-size="10">Prendre connaissance de la réponse</text>

        <!-- Passerelle (Client accepte?) -->
        <rect x="1090" y="255" width="50" height="50" class="gateway" transform="rotate(45, 1115, 280)" />
        <text x="1115" y="320" text-anchor="middle" alignment-baseline="middle">Client accepte?</text>

        <!-- Tâche 8a: Annuler l'offre (Non) -->
        <rect x="1065" y="180" width="100" height="40" class="task" />
        <text x="1115" y="200" text-anchor="middle" alignment-baseline="middle" font-size="10">Annuler l'offre</text>

        <!-- Fin pour offre annulée -->
        <circle cx="1115" cy="130" r="15" class="event end-event" stroke-width="3" />
        <circle cx="1115" cy="130" r="12" stroke="black" stroke-width="1" />
        <path d="M1109,124 L1121,124 M1109,130 L1121,130 M1109,136 L1121,136" stroke="black" stroke-width="1" />
        <text x="1115" y="110" text-anchor="middle">Offre annulée</text>

        <!-- Tâche 8b: Noter acceptation -->
        <rect x="1065" y="350" width="100" height="40" class="task" />
        <text x="1115" y="370" text-anchor="middle" alignment-baseline="middle" font-size="10">Noter l'acceptation</text>

        <!-- SUPERVISEUR -->
        <!-- Événement de début (Consultation matinale) -->
        <circle cx="210" cy="500" r="15" class="event start-event" stroke-width="1.5" />
        <circle cx="210" cy="500" r="12" class="timer-event" stroke="black" stroke-width="1" />
        <circle cx="210" cy="500" r="8" class="timer-event" stroke="black" stroke-width="1" />
        <line x1="210" y1="492" x2="210" y2="500" stroke="black" stroke-width="1" />
        <line x1="210" y1="500" x2="216" y2="500" stroke="black" stroke-width="1" />
        <text x="210" y="530" text-anchor="middle">Chaque matin (5h)</text>

        <!-- Tâche 9: Consulter nouvelles offres -->
        <rect x="260" y="475" width="100" height="50" class="task" />
        <text x="310" y="500" text-anchor="middle" alignment-baseline="middle" font-size="10">Consulter les nouvelles offres</text>

        <!-- Tâche 10: Consulter détail offre -->
        <rect x="390" y="475" width="100" height="50" class="task" />
        <text x="440" y="500" text-anchor="middle" alignment-baseline="middle" font-size="10">Consulter le détail de chaque offre</text>

        <!-- Tâche 11: Noter agent assigné -->
        <rect x="520" y="475" width="100" height="50" class="task" />
        <text x="570" y="500" text-anchor="middle" alignment-baseline="middle" font-size="10">Noter l'agent technique assigné</text>

        <!-- AGENT TECHNIQUE -->
        <!-- Tâche 12: Créer document technique -->
        <rect x="390" y="700" width="100" height="50" class="task" />
        <text x="440" y="725" text-anchor="middle" alignment-baseline="middle" font-size="10">Créer document technique</text>

        <!-- Tâche 13: Imprimer document -->
        <rect x="520" y="700" width="100" height="50" class="task" />
        <text x="570" y="725" text-anchor="middle" alignment-baseline="middle" font-size="10">Imprimer le document</text>

        <!-- Tâche 14: Porter document à l'usine -->
        <rect x="650" y="700" width="100" height="50" class="task" />
        <text x="700" y="725" text-anchor="middle" alignment-baseline="middle" font-size="10">Porter le document à l'usine</text>

        <!-- Fin du processus -->
        <circle cx="800" cy="725" r="15" class="event end-event" stroke-width="3" />
        <text x="800" y="755" text-anchor="middle">Fin du processus</text>

        <!-- FLUX DE SÉQUENCE -->
        <!-- Agent aux soumissions -->
        <path d="M225,200 L260,200" class="sequence-flow" />
        <path d="M360,200 L390,200" class="sequence-flow" />
        <path d="M415,225 L415,300 L370,300" class="sequence-flow" />
        <text x="390" y="240" text-anchor="middle">Non</text>
        <path d="M440,200 L480,200" class="sequence-flow" />
        <text x="460" y="190" text-anchor="middle">Oui</text>
        <path d="M470,325 L520,325" class="sequence-flow" />
        <path d="M580,200 L610,200" class="sequence-flow" />
        <path d="M635,225 L635,300 L590,300" class="sequence-flow" />
        <text x="610" y="240" text-anchor="middle">Non</text>
        <path d="M660,200 L700,200" class="sequence-flow" />
        <text x="680" y="190" text-anchor="middle">Oui</text>
        <path d="M690,325 L740,325" class="sequence-flow" />
        <path d="M800,200 L830,200" class="sequence-flow" />
        <path d="M880,225 L880,265" class="sequence-flow" />
        <path d="M895,280 L960,280" class="sequence-flow" />
        <path d="M1060,280 L1090,280" class="sequence-flow" />
        <path d="M1115,255 L1115,220" class="sequence-flow" />
        <text x="1095" y="240" text-anchor="middle">Non</text>
        <path d="M1115,305 L1115,350" class="sequence-flow" />
        <text x="1130" y="330" text-anchor="middle">Oui</text>
        <path d="M1115,180 L1115,145" class="sequence-flow" />

        <!-- Superviseur -->
        <path d="M225,500 L260,500" class="sequence-flow" />
        <path d="M360,500 L390,500" class="sequence-flow" />
        <path d="M490,500 L520,500" class="sequence-flow" />
        <path d="M570,525 L570,700 L490,700" class="sequence-flow" />

        <!-- Agent technique -->
        <path d="M490,725 L520,725" class="sequence-flow" />
        <path d="M620,725 L650,725" class="sequence-flow" />
        <path d="M750,725 L785,725" class="sequence-flow" />

        <!-- FLUX DE MESSAGE -->
        <!-- Demande de soumission (Client → Agent) -->
        <path d="M210,90 L210,185" class="message-flow" stroke-dasharray="5,5" />
        
        <!-- Courriel d'inscription (Agent → Client) -->
        <path d="M420,300 L420,100" class="message-flow" stroke-dasharray="5,5" />
        <text x="400" y="130" text-anchor="middle">Invitation</text>
        
        <!-- Courriel demande correction (Agent → Client) -->
        <path d="M640,300 L640,100" class="message-flow" stroke-dasharray="5,5" />
        <text x="620" y="130" text-anchor="middle">Avis dessins</text>
        
        <!-- Offre (Agent → Client) -->
        <path d="M880,175 L880,100" class="message-flow" stroke-dasharray="5,5" />
        <text x="860" y="130" text-anchor="middle">Offre</text>
        
        <!-- Réponse (Client → Agent) -->
        <path d="M880,100 L880,265" class="message-flow" stroke-dasharray="5,5" />
        <text x="900" y="130" text-anchor="middle">Réponse</text>
        
        <!-- Document (Agent technique → Usine) -->
        <path d="M700,750 L700,800" class="message-flow" stroke-dasharray="5,5" />
        <text x="720" y="775" text-anchor="middle">Document</text>

        <!-- DATA OBJECTS AND STORES -->
        <!-- Système d'information des soumissions -->
        <rect x="310" y="380" width="40" height="25" class="data-store" />
        <line x1="310" y1="390" x2="350" y2="390" stroke="black" stroke-width="1" />
        <line x1="310" y1="395" x2="350" y2="395" stroke="black" stroke-width="1" />
        <text x="330" y="420" text-anchor="middle" font-size="10">SI Soumissions</text>
        
        <!-- Document technique -->
        <polygon points="600,780 620,780 620,800 600,800" class="data-object" />
        <line x1="610" y1="780" x2="610" y2="770" stroke="black" stroke-width="1" />
        <text x="610" y="820" text-anchor="middle" font-size="10">Document technique</text>
        
        <!-- DATA ASSOCIATIONS -->
        <path d="M310,225 L310,380" class="message-flow" stroke-dasharray="2,2" marker-end="none" />
        <path d="M900,225 L900,380 L350,380" class="message-flow" stroke-dasharray="2,2" marker-end="none" />
        <path d="M1115,390 L1115,420 L330,420" class="message-flow" stroke-dasharray="2,2" marker-end="none" />
        <path d="M310,475 L310,420" class="message-flow" stroke-dasharray="2,2" marker-end="none" />
        <path d="M440,525 L440,450 L330,450 L330,420" class="message-flow" stroke-dasharray="2,2" marker-end="none" />
        <path d="M570,525 L570,450 L330,450 L330,420" class="message-flow" stroke-dasharray="2,2" marker-end="none" />
        <path d="M610,750 L610,800" class="message-flow" stroke-dasharray="2,2" marker-end="none" />
    </svg>
</body>
</html>